<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Daggerheart Character Creator</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body { font-family: system-ui, sans-serif; max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
      h1 { margin: 0 0 1rem; }
      label { display:block; margin: .5rem 0 .25rem; }
      input, select, button { font-size: 1rem; padding: .5rem; }
      button { cursor: pointer; }
      pre { background:#f6f8fa; padding:1rem; border-radius:.5rem; overflow:auto; }
      .row{ display:flex; gap:.75rem; flex-wrap:wrap; align-items:end; }
      .row > div{ flex:1 1 180px; }
    </style>
  </head>
  <body>
    <h1>Daggerheart Character Creator</h1>
    <div class="row">
      <div>
        <label for="level">Level (1–10)</label>
        <input id="level" type="number" min="1" max="10" value="3" />
      </div>
      <div>
        <label for="archetype">Type</label>
        <select id="archetype">
          <option value="">(none)</option>
          <option>Tank</option>
          <option>Damage</option>
          <option>Sneaky</option>
          <option>Support</option>
          <option>Healer</option>
          <option>Face</option>
          <option>Control</option>
        </select>
      </div>
      <div>
        <label>&nbsp;</label>
        <button id="go">Generate</button>
      </div>
    </div>

    <p>Or lock class/subclass via query (optional):</p>
    <div class="row">
      <div><label for="cls">Class</label><input id="cls" placeholder="e.g., Guardian" /></div>
      <div><label for="sub">Subclass</label><input id="sub" placeholder="e.g., Vanguard" /></div>
    </div>

    <h2>Result</h2>
    <pre id="out">Click Generate…</pre>

    <script>
      function q(sel){ return document.querySelector(sel); }
      q('#go').addEventListener('click', async () => {
        const level = q('#level').value.trim() || '1';
        const archetype = q('#archetype').value.trim();
        const cls = q('#cls').value.trim();
        const sub = q('#sub').value.trim();

        const params = new URLSearchParams();
        params.set('level', level);
        if (archetype) params.set('archetype', archetype);
        if (cls) params.set('class', cls);
        if (sub) params.set('subclass', sub);

        const res = await fetch('/api/generate?' + params.toString());
        const data = await res.json();
        q('#out').textContent = JSON.stringify(data, null, 2);
      });
    </script>
  </body>
</html>
